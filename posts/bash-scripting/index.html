<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Bash scripting - Knowledge x Base</title><link rel="icon" type="image/png" href=https://img.icons8.com/doodle/48/000000/video-card.png /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Motivation I wanted a simple and creative way to manage my dotfiles, one which would allow more automation than my previous method. I stumbled upon many existing tools that can be utilised to manage dotfiles, such as GNU Stow and chezmoi. But they all seem to be too overkill for me, and their management method do not float my boat quite that well. Here&rsquo;s what these tools might envision a ~/dotfiles or ~/." />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="Bash scripting" />
<meta property="og:description" content="Motivation I wanted a simple and creative way to manage my dotfiles, one which would allow more automation than my previous method. I stumbled upon many existing tools that can be utilised to manage dotfiles, such as GNU Stow and chezmoi. But they all seem to be too overkill for me, and their management method do not float my boat quite that well. Here&rsquo;s what these tools might envision a ~/dotfiles or ~/." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hhn-pham.github.io/posts/bash-scripting/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-30T00:53:00+00:00" />
<meta property="article:modified_time" content="2021-07-30T00:53:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Bash scripting"/>
<meta name="twitter:description" content="Motivation I wanted a simple and creative way to manage my dotfiles, one which would allow more automation than my previous method. I stumbled upon many existing tools that can be utilised to manage dotfiles, such as GNU Stow and chezmoi. But they all seem to be too overkill for me, and their management method do not float my boat quite that well. Here&rsquo;s what these tools might envision a ~/dotfiles or ~/."/>
<script src="https://hhn-pham.github.io/js/feather.min.js"></script>
	
	
        <link href="https://hhn-pham.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://hhn-pham.github.io/css/main.2f9b5946627215dc1ae7fa5f82bfc9cfcab000329136befeea5733f21e77d68f.css" />
		<link rel="stylesheet" type="text/css" href="https://hhn-pham.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css" media="(prefers-color-scheme: dark)" />
	
	
	
		
		
		<link rel="stylesheet" type="text/css" href="https://hhn-pham.github.io/css/override.98736ef2d3e03248fe9aff0d8bf898ce1f590e2f8c929ba3bfbd35bc6e5765c2.css">
		
    
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://hhn-pham.github.io/">Knowledge x Base</a>
	</div>
	<nav>
		
		<a href="/tags">Tags</a>
		
		<a href="/posts">Posts</a>
		
		<a href="/notes">Notes</a>
		
		<a href="/cheats">Cheats</a>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Bash scripting</h1>
			<div class="meta">Posted on Jul 30, 2021</div>
		</div>
		

		<section class="body">
			<h2 id="motivation">Motivation</h2>
<p>I wanted a simple and creative way to manage my <a href="/posts/dotfiles/">dotfiles</a>, one which would allow more automation than my previous method. I stumbled upon many existing tools that can be utilised to manage dotfiles, such as <a href="https://www.gnu.org/software/stow/">GNU Stow</a> and <a href="https://github.com/twpayne/chezmoi">chezmoi</a>. But they all seem to be too overkill for me, and their management method do not float my boat quite that well. Here&rsquo;s what these tools might envision a <code>~/dotfiles</code> or <code>~/.dotfiles</code> directory:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">dotfiles
|- package-x
    |- file.conf
    |- init.ini
    |- .x
|- package-y
    |- config.json
</code></pre></div><p>However, I prefer to have <strong>all</strong> my dotfiles (and important files from <code>~/.config</code>) that I would like to keep in a remote Github repository in the directory level, with easily identifiable filenames. This way, when directory convention changes, or when I want to quickly edit a theme instead of the settings of a certain program <code>abc</code>, I can edit <code>~/.dotfiles/abc-theme.conf</code> instead of having to navigate to the directory <code>abc</code> and then editing <code>theme.conf</code>, for example. This way, my fuzzy searches with <code>fzf</code> also works both in <code>zsh</code> and <code>neovim</code>.</p>
<h2 id="folder-name">Folder name</h2>
<p>I decided to go with <code>~/dotfiles</code> instead <code>~/.dotfiles</code> because I want to be able to access and see all my configs without toggling &lsquo;show hidden&rsquo; inside TUI and GUI file managers, that way, my home directory always looks clean. Plus, I like matching the names of my git repositories with the local repository.</p>
<h2 id="preferred-structure">Preferred structure</h2>
<p>As mentioned before, I would like my <code>~/dotfiles</code> directory to be:</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">dotfiles
|- x-file.conf
|- x-init.ini
|- x
|- y-config.json
</code></pre></div><p>The mentioned helper packages wouldn&rsquo;t jive so well with this setup.</p>
<h2 id="script">Script</h2>
<p>I&rsquo;m not that good with bash and its syntax since I just moved to using linux full-time for only about 2 months, but I managed to chalk up a script that goes through all the files in the directory (with exceptions) and symlinking them to their respective location within <code>~/.config</code> or elsewhere. My method is to set the first line of each file to a comment with a delimiter <code>:</code>, so that everything after <code>:</code> is the respective <code>/path/to/file</code> relative to <code>$HOME</code>. This way, I can change the name of the symlinked file.</p>
<h2 id="caveats">Caveats</h2>
<ul>
<li><code>fontconfig</code> files are in <code>xml</code> formats and require the first line to be version number. Thus, I have to add exception to these files and read the 2nd line instead.</li>
<li>Due to the way I wrote my script, if the comment system requires commenting characters to be wrapped around the comment itself, I have to close the comment on the next line (like <code>/**/</code> of <code>css</code> files)</li>
<li>It cannot <em>yet</em> create the required directories for the symlink if they don&rsquo;t exist. This is probably an easy addition but I&rsquo;m lazy, and this works well enough, once I have to set up another box, I will try to implement some sort of <code>mkdir -p</code> command so I don&rsquo;t have to create a billion folders</li>
<li>It can detect if a file of the same name as the symlink already exists, and if so, rename it to <code>*.old</code> and then perform the symlinking, however, if the conflicted file is another symlink, this does not work.
<ul>
<li>The workaround might be to detect if it is a symlink, and then simply removing the symlink instead.</li>
</ul>
</li>
</ul>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/tech">tech</a></li>
					
					<li><a href="/tags/writing">writing</a></li>
					
					<li><a href="/tags/linux">linux</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
<hr><a class="soc" href="https://github.com/hhn-pham" title="GitHub"><i data-feather="github"></i></a>|⚡️
	2021  © me |  <a href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
</footer>


<script>
      feather.replace()
</script></div>
    </body>
</html>
